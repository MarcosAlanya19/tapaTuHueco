---
import {Image} from 'astro:assets';
import Text from "./ui/Text.astro";
---

<nav class="fixed inset-x-0 top-0 z-20 flex w-full flex-wrap text-sm md:flex-nowrap md:justify-start px-5 py-2 md:px-10 md:py-5 backdrop-blur-md bg-gradient-to-b from-white/70 to-transparent h-[4rem] md:h-[5rem]">
    <div
      class="h-16 md:max-h-[55px] bg-transparent md:bg-white w-full md:rounded-[32.5px] flex justify-between items-center md:pl-10 md:pr-2.5 md:shadow-lg backdrop-blur-sm"
    
    >
        <ul
                class="flex gap-6 hidden md:flex"
        >
            <li>
                <a
                        href="#header"
                >
                    <Text
                            as="span"
                            color="red"
                            font="Fredoka"
                            text="Inicio"
                            weight="regular"
                            className="text-[18px]"
                    />
                </a>
            </li>
            <li>
                <a
                        href="#us"
                >
                    <Text
                            as="span"
                            color="red"
                            font="Fredoka"
                            text="Nosotros"
                            weight="regular"
                            className="text-[18px]"
                    />
                </a>
            </li>
            <li>
                <a
                        href="#map"
                >
                    <Text
                            as="span"
                            color="red"
                            font="Fredoka"
                            className="text-[18px]"
                            text="Mapa"
                            weight="regular"
                    />
                </a>
            </li>
        </ul>

        <a
                href="#header"
                class="flex items-center"
        >
            <Image
                    height={80}
                    width={80}
                    src="/svg/Logo.svg"
                    alt="Nombre del Sitio - Inicio"
                    class="h-[50px] md:h-[80px] w-[50px] md:w-[80px]"
            />
        </a>

        <div
                class="flex gap-y-4 md:flex-row items-center md:justify-end gap-x-4 lg:gap-x-7 md:ps-7"
        >
            <a
              href="#donwloadApp"
              class="bg-red rounded-[24.5px] w-[167px] h-[45px] flex items-center justify-center cursor-pointer"
            >
                <Text
                  as="p"
                  color="white"
                  font="Fredoka"
                  text="Empezar ahora"
                  weight="medium"
                  className="text-[16px]"
                />
            </a>
            <button
                    id="burger-button"
                    type="button"
                    class="hs-collapse-toggle flex h-8 w-8 items-center justify-center rounded-full text-sm font-bold text-neutral-600 transition duration-300 hover:bg-neutral-200 disabled:pointer-events-none disabled:opacity-50 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:focus:outline-hidden md:hidden"
                    data-hs-collapse="#navbar-collapse-with-animation"
                    aria-controls="navbar-collapse-with-animation"
                    aria-label="Toggle navigation"
            >
                <svg
                        width="27"
                        height="14"
                        viewBox="0 0 27 14"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                >
                    <path
                            d="M2 2H25.5"
                            stroke="#E42521"
                            stroke-width="3"
                            stroke-linecap="round"
                    />
                    <path
                            d="M2 7H25.5"
                            stroke="#E42521"
                            stroke-width="3"
                            stroke-linecap="round"
                    />
                    <path
                            d="M2 12H25.5"
                            stroke="#E42521"
                            stroke-width="3"
                            stroke-linecap="round"
                    />
                </svg>
            </button>
        </div>
    </div>
</nav>

<div
        id="overlay"
        class="fixed inset-0 bg-red z-30 hidden h-screen w-screen overscroll-y-none transform -translate-y-full transition-transform duration-300 grid grid-rows-[auto_1fr_auto] p-4 md:p-8"
>
    <div class="flex justify-between w-full pb-5">
        <Image
                height={80}
                width={80}
                src="/svg/Logo.svg"
                alt="Nombre del Sitio - Inicio"
                class="h-[50px] md:h-[80px] w-[50px] md:w-[80px]"
        />
        <button id="close-overlay" class="top-4 right-4">
            <svg
                    width="24"
                    height="21"
                    viewBox="0 0 24 21"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
            >
                <path
                        d="M3.44141 2L20.0584 18.617"
                        stroke="white"
                        stroke-width="3"
                        stroke-linecap="round"
                />
                <path
                        d="M3.44141 18.6171L20.0584 2.00006"
                        stroke="white"
                        stroke-width="3"
                        stroke-linecap="round"
                />
            </svg>
        </button>
    </div>

    <!-- Menú de navegación -->
    <div class="flex flex-col items-center justify-start pr-3 flex-1">
        <ul class="text-2xl w-full space-y-6">
            <a href="#header" class="hover:underline block text-right">
                <li>
                    <Text
                            as="span"
                            color="white"
                            font="Fredoka"
                            size="2.5rem"
                            text="Inicio"
                            weight="medium"
                    />
                </li>
            </a>
            <a href="#us" class="hover:underline block text-right">
                <li>
                    <Text
                            as="span"
                            color="white"
                            font="Fredoka"
                            size="2.5rem"
                            text="Nosotros"
                            weight="medium"
                    />
                </li>
            </a>
            <a href="#map" class="hover:underline block text-right">
                <li>
                    <Text
                            as="span"
                            color="white"
                            font="Fredoka"
                            size="2.5rem"
                            text="Mapa"
                            weight="medium"
                    />
                </li>
            </a>
        </ul>
    </div>

    <!-- Sección de descargas -->
    <div class="flex flex-col justify-end items-center gap-4 pb-6">
        <Image
                width={180}
                height={60}
                alt="GooglePlay"
                class="cursor-pointer"
                src="/svg/GooglePlay.svg"
                loading="lazy"
        />
        <Image
                width={180}
                height={60}
                alt="AppStore"
                class="cursor-pointer"
                loading="lazy"
                src="/svg/AppStore.svg"
        />
        <div class="border-b-4 rounded-xl w-[100px] mt-10"/>
    </div>
</div>


<style is:inline>
  .overlay-enter {
    transform: translateY(-100%);
    transition: transform 0.3s ease-out;
  }

  .overlay-enter-active {
    transform: translateY(0);
    transition: transform 0.3s ease-out;
  }

  .overlay-exit {
    transform: translateY(0);
    transition: transform 0.3s ease-in;
  }

  .overlay-exit-active {
    transform: translateY(-100%);
    transition: transform 0.3s ease-in;
  }

  .transition-all {
    transition: all 0.3s ease-out;
  }
</style>

<script>
	const burgerButton = document.getElementById('burger-button');
	const overlay = document.getElementById('overlay');
	const closeButton = document.getElementById('close-overlay');
	const menuLinks = overlay.querySelectorAll('a');
	
	function closeMenu() {
		overlay.classList.remove('translate-y-0');
		overlay.classList.add('translate-y-full');
		
		setTimeout(() => {
			overlay.classList.add('hidden');
			overlay.classList.remove('translate-y-full');
			overlay.classList.add('-translate-y-full');
		}, 300);
		
		document.body.style.overflow = 'auto';
	}
	
	burgerButton.addEventListener('click', function () {
		overlay.classList.remove('hidden');
		setTimeout(() => {
			overlay.classList.remove('-translate-y-full');
			overlay.classList.add('translate-y-0');
		}, 10);
		
		document.body.style.overflow = 'hidden';
	});
	
	closeButton.addEventListener('click', closeMenu);
	
	menuLinks.forEach(link => {
		link.addEventListener('click', closeMenu);
	});
</script>
